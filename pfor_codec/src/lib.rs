// Copyright 2016 Jeremy Mason
//
// Licensed under the MIT license <LICENSE or
// http://opensource.org/licenses/MIT>. This file may not be copied, modified,
// or distributed except according to those terms.

//! The purpose of this crate is to relegate the functions generated by the
//! `encode!`, `decode!`, `encode_simd!`, `decode_simd!`, `encode_zz!` and
//! `decode_zz!` syntax extensions of `pfor_macros` to a separate compilation
//! unit. More extensive documentation is given in the `pfor_macros` crate.

#![feature(plugin)]
#![plugin(pfor_macros)]

extern crate simd;

macro_rules! codec {
  ($(($width: expr, $step: expr, $simd: path))*) => ($(
    encode!($width, $step);
    decode!($width, $step);
    encode_simd!($width, $simd);
    decode_simd!($width, $simd);
    encode_zz!($width, $simd);
    decode_zz!($width, $simd);
  )*)
}

// Require CTFE for usize, width must be known for simd instructions
codec!{
  (8, 16, simd)
  (16, 16, simd)
  (32, 16, simd)
  (64, 16, simd::x86::sse2)
}
